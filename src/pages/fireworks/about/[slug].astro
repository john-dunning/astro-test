---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import Layout from "@/layouts/Layout.astro";
import PackageContents from "@/components/PackageContents.astro";
import CommandsNavList from "@/components/CommandsNavList.astro";
import { getIncImage } from "@/utils/getIncImage";

export async function getStaticPaths()
{
	const commands = await getCollection("commands");

	return commands.map((entry) => ({
		params: {
			slug: entry.slug
		},
		props: {
			entry
		},
	}));
}

const { entry: { render, slug, data: { name, files } } } = Astro.props;
const { Content } = await render();
const title = `${name} - Adobe Fireworks Extensions, Commands and Panels`;
const imageData = await getIncImage(`${slug}.png`);
---

<Layout title={title}>
	<article>
		<h1 class="command-name">{name}</h1>

		{imageData &&
			<Image class="inc-image" src={imageData} alt="Screenshot" />
		}

		<Content />
	</article>

	<PackageContents files={files} />

	<CommandsNavList />
</Layout>

<style>
	h1.command-name {
		font-size: 2rem;
		margin-bottom: 3rem;
	}

	strong {
		font-weight: bold;
	}

	em {
		font-style: italic;
	}

	.inc-image {
		margin-bottom: 3rem;
		display: block;
	}

	article :global(h2) {
		font-size: 1.5rem;
		margin: 3rem 0 0.75rem 0;
	}

	article :global(h3) {
		font-size: 1.25rem;
		margin: 1rem 0 0.25rem 0;
	}

	article :global(blockquote) {
		margin: 1em 0 1em 2.5em;
		font-size: inherit;
	}

	article :global(ol) {
		margin-left: 2.5em;
		margin-bottom: 1em;
	}

	article :global(ol li) {
		list-style: decimal outside;
	}

	article :global(table) {
		margin: 1em 0;
	}

	article :global(td) {
		vertical-align: top;
		padding: 0 1em .5em 0;
	}

	article :global(dl) {
		padding-left: 2.5em;
		margin: 1em 0;
	}

	article :global(dt) {
		font-weight: bold;
		color: #666;
	}

	article :global(dd) {
		margin: 0 0 1em 0;
	}

	article :global(p code), article :global(dd code) {
		font-weight: normal;
		font-family: monospace;
		color: #333;
	}

	article :global(pre) {
		color: #1C1D1F;
		background: #f3f3f3;
		border-left: 3px solid #ccc;
		line-height: 1.3;
		padding: 1em 1em 1em 2em;
		margin: 1em 0 1em 2.5em;
	}

	article :global(pre code) {
		line-height: 1.2;
		font-size: .75em;
		tab-size: 4;
	}

	article :global(section.footnotes) {
		padding-inline-start: 2.5rem;
		margin: 5rem 0;
		color: #333;
		font-size: smaller;
	}

	article :global(section.footnotes ol) {
		padding-left: 0;
		margin: 0;
	}
</style>
