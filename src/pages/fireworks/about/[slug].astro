---
import { getCollection } from "astro:content";
import FireworksPage from "@/layouts/FireworksPage.astro";
import FireworksArticle from "@/components/FireworksArticle.astro";
import PackageContents from "@/components/PackageContents.astro";
import { getIncImage } from "@/utils/getIncImage";

export async function getStaticPaths()
{
	const commands = await getCollection("commands");

	return commands.map((entry) => ({
		params: {
			slug: entry.slug
		},
		props: {
			entry
		},
	}));
}

const { entry: { render, slug, data: { name, files } } } = Astro.props;
const { Content } = await render();
const imageData = !!slug && await getIncImage(`${slug}.png`);
---

<FireworksPage
	title={name}
	disqusID={`fireworks/about/${slug}`}
>
	<FireworksArticle
		title={name}
		heroImage={imageData}
	>
		<Content />
	</FireworksArticle>

	<PackageContents files={files} />
</FireworksPage>
