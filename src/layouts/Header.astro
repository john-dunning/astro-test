---
import { base } from "@/utils/urls.ts";

	// filter the split pathname to ignore leading or trailing slashes.  also
	// remove any base URL when showing the section.  we'll add it back in via
	// base() below.
const [section, ...restOfPath] = Astro.url.pathname
	.replace(new RegExp(`^${import.meta.env.BASE_URL}`), "")
	.split("/")
	.filter(Boolean);
---

<div class="site-name">
	<a href={base("/")} aria-current={section ? undefined : "page"}>
		john<strong>dunning</strong>.com/
	</a>
</div>

<header>
	{section &&
		<a href={base(`/${section}/`)} aria-current={restOfPath.length ? undefined : "page"}>{section}</a>
	}
</header>

<style lang="scss">
	header, .site-name {
		color: var(--header-secondary);
		font-size: 1.75rem;
		font-weight: bold;
		margin: 1.25rem 0 2rem 0;
		position: relative;

		& a[aria-current] {
			pointer-events: none;
		}
	}

	.site-name {
		grid-area: site-name;

		& a {
			color: var(--header-secondary);

			& strong {
				color: var(--header-primary);
			}
		}
	}

	header {
		color: var(--text-color-accent);
		grid-area: header;

		& a:visited {
			color: inherit;
		}
	}
</style>
